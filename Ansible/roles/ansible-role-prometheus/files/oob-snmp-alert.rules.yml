groups:
- name: Basic
  rules:
  - alert: Instance is Down
    expr: up{instance != "10.36.48.28"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: '{{$labels.instance}} of job {{$labels.job}} has been down for  more than 5 minutes.'
      summary: 'Instance down.'
  - alert: Netowrk interface is down
    expr: (ifAdminStatus  offset 5m  == 1 and ifOperStatus offset 5m == 1)  and (ifAdminStatus == 2 or ifOperStatus == 2)
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Network interface {{$labels.ifDescr}} {{$labels.ifName}}  on instance {{$labels.instance}} of job {{$labels.job}} has been down for  more than 5 minutes.'
      summary: 'Network Interface is down.'
  - alert: Network connection is broken
    expr: irate(ifOutOctets[5m] offset 5m)  != 0 and rate(ifOutOctets[5m])== 0  and ifAdminStatus == 1 and ifOperStatus == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Connection on network interface {{$labels.ifDescr}} {{$labels.ifName}}  on instance {{$labels.instance}} of job {{$labels.job}} has been broken for 5 minutes '
      summary: 'Network connection is broken'
- name: Cisco switches
  rules:
  - alert: Switch Fan is not working properly
    expr: ciscoEnvMonFanState == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Fan {{$labels.ciscoEnvMonFanStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is not working properly'
      summary: 'Switch Fan is not working properly.'
  - alert: Swich Power Supply is down
    expr: ciscoEnvMonSupplyState{ciscoEnvMonSupplyStatusDescr=~".*Normal"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Power supply {{$labels.ciscoEnvMonSupplyStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is down'
      summary:  'Switch Power supply  is down.'
  - alert: Switch Temperature is abnormal
    expr: ciscoEnvMonTemperatureState == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Temperature on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary:  'Switch Temperature is abnormal'
  - alert: Switch Temperature value is High
    expr: ciscoEnvMonTemperatureStatusValue >= ciscoEnvMonTemperatureThreshold * 0.8
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch Temperature value on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$va
lue}}'
      summary:  'Switch Temperature value is high'
  - alert: Switch Temperaturev value is High
    expr: ciscoEnvMonTemperatureStatusValue >= ciscoEnvMonTemperatureThreshold * 0.9
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Temperature value on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$va
lue}}'
      summary:  'Switch Temperature value is high'
  - alert: Switch Memory usage is high
    expr: cpmCPUMemoryUsed{job="switch"} /(cpmCPUMemoryFree{job="switch"} + cpmCPUMemoryUsed{job="switch"}) >= 80
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch Memory usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch Memory usage is high'
  - alert: Switch Memory usage is high
    expr: cpmCPUMemoryUsed{job="switch"} /(cpmCPUMemoryFree{job="switch"} + cpmCPUMemoryUsed{job="switch"}) >= 90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Memory usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch Memory usage is high'
  - alert: Switch CPU usage is high
    expr: cpmCPUTotal5minRev >= 80
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch CPU usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch CPU usage is high'
  - alert: Switch CPU usage is high
    expr: cpmCPUTotal5minRev >=90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch CPU usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch CPU usage is high'
- name: Blade servers
  rules:
  - alert: Blade Server CPU is unhealthy
    expr: cpuVpdHealthStatus{cpuVpdHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Servers CPU {{$labels.cpuVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server CPU is unhealthy.'
  - alert: Blade Server CPU is unhealthy
    expr: cpuVpdHealthStatus{cpuVpdHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server CPU {{$labels.cpuVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server CPU is unhealthy.'
  - alert: Blade Server Memory is unhealthy
    expr: memoryHealthStatus{memoryHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Memory module {{$labels.memoryVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Memory is unhealthy.'
  - alert: Blade Server Memory is unhealthy
    expr: memoryHealthStatus{memoryHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Memory module {{$labels.memoryVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Memory is unhealthy.'
  - alert: Blade Server Disk is unhealthy
    expr: diskHealthStatus{diskHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Disk {{$labels.diskFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Disk is unhealthy.'
  - alert: Blade Server Disk is unhealthy
    expr: diskHealthStatus{diskHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Disk {{$labels.diskFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Disk is unhealthy.'
  - alert: Blade Server FAN is unhealthy
    expr: fanHealthStatus{fanHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Fan {{$labels.fanDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Fan is unhealthy.'
  - alert: Blade Server FAN is unhealthy
    expr: fanHealthStatus{fanHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Fan {{$labels.fanDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Fan is unhealthy.'
  - alert: Blade Server Power supply is unhealthy
    expr: powerHealthStatus{powerHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Power supply {{$labels.powerFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Power supply is unhealthy.'
  - alert: Blade Server Power supply is unhealthy
    expr: powerHealthStatus{powerHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Power supply {{$labels.powerFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Power supply is unhealthy.'
  - alert: Blade Server RAID controller Battery Capacity is decreased
    expr: raidCtrlBatBCKChgCap != raidCtrlBatBCKDgnChgCap
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is decreased'
      summary: 'Blade Server RAID controller Battery is decreased'
  - alert: Blade Server RAID controller Battery is abnormal
    expr: raidCtrlBatBCKStatus{raidCtrlBatBCKStatus = "Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server RAID controller Battery is abnormal'
  - alert: Blade Server RAID controller Battery is abnormal
    expr: raidCtrlBatBCKStatus{raidCtrlBatBCKStatus = "Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server RAID controller Battery is abnormal'
  - alert: Blade Server RAID drive is unhealthy
    expr: raidDriveState{raidDriveHealthStataus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server RAID drive {{$labels.raidDriveName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server RAID controller Battery is unhealthy'
  - alert: Blade Server RAID drive is unhealthy
    expr: raidDriveState{raidDriveHealthStataus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID drive {{$labels.raidDriveName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server RAID controller Battery is unhealthy'
  - alert: Blade Server System is unhealthy
    expr: systemHealthStat != 255
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server Instance is unhealthy'
  - alert: Blade Server Temperature is abnormal
    expr: tempHealthStatus{tempHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Temperature of module {{$labels.tempDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Temperature is abnormal'
  - alert: Blade Server Temperature is abnormal
    expr: tempHealthStatus{tempHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Temperature of module {{$labels.tempDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Temperature is abnormal'
  - alert: Blade Server voltage is abnormal
    expr: voltHealthStatus{voltHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Voltage of module {{$labels.voltDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Voltage is abnormal'
  - alert: Blade Server voltage is abnormal
    expr: voltHealthStatus{voltHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Voltage of module {{$labels.voltDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Voltage is abnormal'
- name: f5
  rules:
  - alert: F5 Disk usage is high
    expr: dskPercent >= 90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Disk  {{$labels.dskDevice}} of instance {{$labels.instance}} of job {{$labels.job}} usage is high, current value is {{$value}}'
      summary: 'F5 Disk usage is high'
  - alert: F5 CPU is not running
    expr: hrDeviceStatus != 2
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'F5 CPU on instance {{$labels.instance}} of job {{$labels.job}} is not running'
      summary: 'F5 CPU is not running'
  - alert: F5 memory usage high
    expr: 1 - (memTotalFree+memBuffer+memShared+memCached) / memTotalReal > 0.9
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'F5 memory usage on instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary: 'F5 memory usage high'
- name: firewall
  rules:
  - alert: Firewall CPU load15 is high
    expr: cpmCPULoadAvg15mini{job="firewall"} > 12
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Firewall CPU  load on instance  {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary: 'Firewall CPU load15 is high'
      #  - alert: Firewall memory usage  is high
      #    expr: cpmCPUMemoryUsed{job="firewall"} / ( cpmCPUMemoryUsed{job="firewall"} + cpmCPUMemoryFree{job="firewall"} ) > 0.95
      #    for: 5m
      #    labels:
      #      severity: critical
      #    annotations:
      #      description: 'Firewall Memory  usage on instance  {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      #      summary: 'Firewall memory usage is high'
- name: Tape Libary
  rules:
  - alert: Tape Libary is not running normal
    expr: bDTGlobalStatus != 3
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Tape Libary of instance  {{$labels.instance}} of job {{$labels.job}} is not running normal'
      summary:  'Tape Libary is not running normal'
- name: netapp
  rules:
  - alert: Netapp Storage has failed disks
    expr: diskFailedCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskFailedCount}} failed disks on instance {{$labels.instance}} of job {{$labels.job}},details is {{$diskFailedMessage}}'
      summary:  'Netapp Storage has failed disks'
jenningsl@yh-bm-ob-mon-prod01:~$ more /etc/prometheus/alert.rules.yml
groups:
- name: Basic
  rules:
  - alert: Instance is Down
    expr: up == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: '{{$labels.instance}} of job {{$labels.job}} has been down for  more than 5 minutes.'
      summary: 'Instance down.'
  - alert: Netowrk interface is down
    expr: irate(ifOutOctets[5m] offset 5m)  != 0 and rate(ifOutOctets[5m])== 0  and ifAdminStatus == 1 and ifOperStatus == 2
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Network interface {{$labels.ifDescr}} {{$labels.ifName}}  on instance {{$labels.instance}} of job {{$labels.job}} has been down for  more than 5 minutes.'
      summary: 'Network Interface is down.'
  - alert: Network connection is broken
    expr: irate(ifOutOctets[5m] offset 5m)  != 0 and rate(ifOutOctets[5m])== 0  and ifAdminStatus == 1 and ifOperStatus == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Connection on network interface {{$labels.ifDescr}} {{$labels.ifName}}  on instance {{$labels.instance}} of job {{$labels.job}} has been broken for 5 minutes '
      summary: 'Network connection is broken'
- name: Cisco switches
  rules:
  - alert: Switch Fan is not working properly
    expr: ciscoEnvMonFanState == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Fan {{$labels.ciscoEnvMonFanStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is not working properly'
      summary: 'Switch Fan is not working properly.'
  - alert: Swich Power Supply is down
    expr: ciscoEnvMonSupplyState{ciscoEnvMonSupplyStatusDescr=~".*Normal"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Power supply {{$labels.ciscoEnvMonSupplyStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is down'
      summary:  'Switch Power supply  is down.'
  - alert: Switch Temperature is abnormal
    expr: ciscoEnvMonTemperatureState == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Temperature on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary:  'Switch Temperature is abnormal'
  - alert: Switch Temperature value is High
    expr: ciscoEnvMonTemperatureStatusValue >= ciscoEnvMonTemperatureThreshold * 0.8
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch Temperature value on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$va
lue}}'
      summary:  'Switch Temperature value is high'
  - alert: Switch Temperaturev value is High
    expr: ciscoEnvMonTemperatureStatusValue >= ciscoEnvMonTemperatureThreshold * 0.9
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Temperature value on module  {{$labels.ciscoEnvMonTemperatureStatusDescr}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$va
lue}}'
      summary:  'Switch Temperature value is high'
  - alert: Switch Memory usage is high
    expr: cpmCPUMemoryUsed{job="switch"} /(cpmCPUMemoryFree{job="switch"} + cpmCPUMemoryUsed{job="switch"}) >= 80
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch Memory usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch Memory usage is high'
  - alert: Switch Memory usage is high
    expr: cpmCPUMemoryUsed{job="switch"} /(cpmCPUMemoryFree{job="switch"} + cpmCPUMemoryUsed{job="switch"}) >= 90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch Memory usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch Memory usage is high'
  - alert: Switch CPU usage is high
    expr: cpmCPUTotal5minRev >= 80
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Switch CPU usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch CPU usage is high'
  - alert: Switch CPU usage is high
    expr: cpmCPUTotal5minRev >=90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Switch CPU usage Of module {{$labels.cpmCPUTotalIndex}} of instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary:  'Switch CPU usage is high'
- name: Blade servers
  rules:
  - alert: Blade Server CPU is unhealthy
    expr: cpuVpdHealthStatus{cpuVpdHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Servers CPU {{$labels.cpuVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server CPU is unhealthy.'
  - alert: Blade Server CPU is unhealthy
    expr: cpuVpdHealthStatus{cpuVpdHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server CPU {{$labels.cpuVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server CPU is unhealthy.'
  - alert: Blade Server Memory is unhealthy
    expr: memoryHealthStatus{memoryHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Memory module {{$labels.memoryVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Memory is unhealthy.'
  - alert: Blade Server Memory is unhealthy
    expr: memoryHealthStatus{memoryHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Memory module {{$labels.memoryVpdDescription}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Memory is unhealthy.'
  - alert: Blade Server Disk is unhealthy
    expr: diskHealthStatus{diskHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Disk {{$labels.diskFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Disk is unhealthy.'
  - alert: Blade Server Disk is unhealthy
    expr: diskHealthStatus{diskHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Disk {{$labels.diskFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Disk is unhealthy.'
  - alert: Blade Server FAN is unhealthy
    expr: fanHealthStatus{fanHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Fan {{$labels.fanDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Fan is unhealthy.'
  - alert: Blade Server FAN is unhealthy
    expr: fanHealthStatus{fanHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Fan {{$labels.fanDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Fan is unhealthy.'
  - alert: Blade Server Power supply is unhealthy
    expr: powerHealthStatus{powerHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Power supply {{$labels.powerFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Power supply is unhealthy.'
  - alert: Blade Server Power supply is unhealthy
    expr: powerHealthStatus{powerHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Power supply {{$labels.powerFruName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy.'
      summary: 'Blade Server Power supply is unhealthy.'
  - alert: Blade Server RAID controller Battery Capacity is decreased
    expr: raidCtrlBatBCKChgCap != raidCtrlBatBCKDgnChgCap
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is decreased'
      summary: 'Blade Server RAID controller Battery is decreased'
  - alert: Blade Server RAID controller Battery is abnormal
    expr: raidCtrlBatBCKStatus{raidCtrlBatBCKStatus = "Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server RAID controller Battery is abnormal'
  - alert: Blade Server RAID controller Battery is abnormal
    expr: raidCtrlBatBCKStatus{raidCtrlBatBCKStatus = "Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID controller Battery {{$labels.raidCtrlName}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server RAID controller Battery is abnormal'
  - alert: Blade Server RAID drive is unhealthy
    expr: raidDriveState{raidDriveHealthStataus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server RAID drive {{$labels.raidDriveName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server RAID controller Battery is unhealthy'
  - alert: Blade Server RAID drive is unhealthy
    expr: raidDriveState{raidDriveHealthStataus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server RAID drive {{$labels.raidDriveName}} on instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server RAID controller Battery is unhealthy'
  - alert: Blade Server System is unhealthy
    expr: systemHealthStat != 255
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Instance {{$labels.instance}} of job {{$labels.job}} is unhealthy'
      summary: 'Blade Server Instance is unhealthy'
  - alert: Blade Server Temperature is abnormal
    expr: tempHealthStatus{tempHealthStatus="Warning"} == 1
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Temperature of module {{$labels.tempDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Temperature is abnormal'
  - alert: Blade Server Temperature is abnormal
    expr: tempHealthStatus{tempHealthStatus="Critical"} == 1
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Blade Server Temperature of module {{$labels.tempDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Temperature is abnormal'
  - alert: Blade Server voltage is abnormal
    expr: voltHealthStatus{voltHealthStatus="Warning"} == 0
    for: 5m
    labels:
      severity: warning
    annotations:
      description: 'Blade Server Voltage of module {{$labels.voltDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Blade Server Voltage is abnormal'
  - alert: Blade Server voltage is abnormal
    expr: voltHealthStatus{voltHealthStatus="Critical"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Voltage of module {{$labels.voltDescr}} on instance {{$labels.instance}} of job {{$labels.job}} is abnormal'
      summary: 'Voltage is abnormal'
- name: f5
  rules:
  - alert: F5 Disk usage is high
    expr: dskPercent >= 90
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Disk  {{$labels.dskDevice}} of instance {{$labels.instance}} of job {{$labels.job}} usage is high, current value is {{$value}}'
      summary: 'F5 Disk usage is high'
  - alert: F5 CPU is not running
    expr: hrDeviceStatus != 2
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'F5 CPU on instance {{$labels.instance}} of job {{$labels.job}} is not running'
      summary: 'F5 CPU is not running'
  - alert: F5 memory usage high
    expr: 1 - memTotalFree / memTotalReal > 0.9
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'F5 memory usage on instance {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary: 'F5 memory usage high'
- name: firewall
  rules:
  - alert: Firewall CPU load15 is high
    expr: cpmCPULoadAvg15mini{job="firewall"} > 12
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Firewall CPU  load on instance  {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      summary: 'Firewall CPU load15 is high'
      #  - alert: Firewall memory usage  is high
      #    expr: cpmCPUMemoryUsed{job="firewall"} / ( cpmCPUMemoryUsed{job="firewall"} + cpmCPUMemoryFree{job="firewall"} ) > 0.95
      #    for: 5m
      #    labels:
      #      severity: critical
      #    annotations:
      #      description: 'Firewall Memory  usage on instance  {{$labels.instance}} of job {{$labels.job}} is high, current value is {{$value}}'
      #      summary: 'Firewall memory usage is high'
- name: Tape Libary
  rules:
  - alert: Tape Libary is not running normal
    expr: bDTGlobalStatus != 3
    for: 5m
    labels:
      severity: critical
    annotations:
      description: 'Tape Libary of instance  {{$labels.instance}} of job {{$labels.job}} is not running normal'
      summary:  'Tape Libary is not running normal'
- name: netapp
  rules:
  - alert: Netapp Storage has failed disks
    expr: diskFailedCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskFailedCount}} failed disks on instance {{$labels.instance}} of job {{$labels.job}},details is {{$diskFailedMessage}}'
      summary:  'Netapp Storage has failed disks'
  - alert: Netapp Storage has prefailed disks
    expr: diskPrefailedCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskPrefailedCount}} prefailed disks on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage has prefailed disks'
  - alert: Netapp Storage has  disks being Reconstructing
    expr: diskReconstructingCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskReconstructingCount}}  disks being Reconstructing on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage has disks being Reconstructing'
  - alert: Netapp Storage has parity disks being Reconstructing
    expr: diskReconstructingParityCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskReconstructingParityCount}}  Parity disks being Reconstructing on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage  has parity disks being Reconstructing'
  - alert: Netapp Storage has  disks being scrubbed
    expr: diskScrubbingCount{job="netapp"} != 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage has {{$labels.diskScrubbingCount}}   disks being scrubbed on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage  has disks being scrubbed'
  - alert: Netapp Storage enclosure communitcation is not active
    expr: enclContactState{job="netapp"} != 3
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} communitcation  on instance {{$labels.instance}} of job {{$labels.job}} is not acitve'
      summary:  'Netapp Storage enclosure communitcation is not active'
  - alert: Netapp Storage enclosure has failed electronics elements
    expr: enclElectronicsFailed{enclElectronicsFailed != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has failed electronics elements  on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has failed electronics elements'
  - alert: Netapp Storage enclosure has failed  fans
    expr: enclFansFailed{enclFansFailed != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has failed fans on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has failed  fans'
  - alert: Netapp Storage enclosure has failed  power supplies
    expr: enclPowerSuppliesFailed{enclPowerSuppliesFailed != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has failed power supplies on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has failed  supplies'
  - alert: Netapp Storage enclosure has  overtemperature failure
    expr: enclTempSensorsOverTempFail{enclTempSensorsOverTempFail != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has overtemperature failure on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has overtemperature failure'
  - alert: Netapp Storage enclosure has  overtemperature warning
    expr: enclTempSensorsOverTempFail{enclTempSensorsOverTempFail != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: warning
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has overtemperature warning on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has overtemperature warning'
  - alert: Netapp Storage enclosure has  overvoltage failure
    expr: enclVoltSensorsOverVoltFail{enclVoltSensorsOverVoltFail != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has overvoltage failure on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has overvoltae failure'
  - alert: Netapp Storage enclosure has overvoltage warning
    expr: enclVoltSensorsOverVoltWarn{enclVoltSensorsOverVoltWarn != "",job="netapp"} == 1
    for: 3m
    labels:
      severity: warning
    annotations:
      description: 'Netapp storage enclosure {{$labels.enclIndex}} has overvoltage warning on instance {{$labels.instance}} of job {{$labels.job}}'
      summary:  'Netapp Storage enclosure has overvoltage warning'
  - alert: Netapp Storage  status of the referenced disk drive is not active
    expr: raidPStatus{job="netapp"} != 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage status of the referenced disk drive  on instance {{$labels.instance}} of job {{$labels.job}} is not active: voluem {{$labels.raidPVol}}'
      summary:  'Netapp Storage status of the referenced disk drive is not active'
  - alert: Netapp Storage  plex is offiline
    expr: plexStatus{job="netapp"} == 1
    for: 3m
    labels:
      severity: critical
    annotations:
      description: 'Netapp storage plex {{$labels.plexIndex}} on instance {{$labels.instance}} of job {{$labels.job}} is offline'
      summary:  'Netapp Storage plex is offiline'
- name: F5 Objects
  rules:
  - alert: bigip Virtual server is not available
    expr: bigip_vs_status_availability_state{vs !~ "listener_.*"} == 0
    for: 2m
    labels:
      severity: critical
    annotations:
      description: 'OOB monitor: BigIP F5 Virtual server {{$labels.vs}} on instance  {{$labels.instance}} of job {{$labels.job}} has been down for  more than 2 minutes.'
      summary: 'OOB monitor: bigip Virtual server is not available.'
  - alert: bigip pool is not available
    expr: bigip_pool_status_availability_state == 0
    for: 2m
    labels:
      severity: critical
    annotations:
      description: 'OOB monitor: BigIP F5 pool {{$labels.pool}} on instance  {{$labels.instance}} of job {{$labels.job}} has been down for  more than 2 minutes.'
      summary: 'OOB monitor: bigip pool is not available '
